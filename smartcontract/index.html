<html>
  <head>
    <title>Shipment</title>


  </head>
  <style>
.content {
  max-width: 500px;
  margin: auto;
}
</style>

  <body class="content">

  <script src="https://cdn.rawgit.com/ethereum/web3.js/develop/dist/web3.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
    <script>

      if (typeof window !== 'undefined' && typeof window.web3 !== 'undefined') {
       var web3 = new Web3(window.web3.currentProvider);
      }
      else {
        const provider = new Web3.providers.HttpProvider('rinkeby.infura.io/v3/3d366b121560446f8885ebc007722cdd');
       var web3 = new Web3(provider);

      }

      var abi = [
        {
          "anonymous": false,
          "inputs": [
            {
              "indexed": false,
              "name": "addr",
              "type": "address"
            },
            {
              "indexed": false,
              "name": "share",
              "type": "uint256"
            }
          ],
          "name": "Update",
          "type": "event"
        },
        {
          "constant": false,
          "inputs": [
            {
              "name": "share",
              "type": "uint256"
            }
          ],
          "name": "updateShares",
          "outputs": [],
          "payable": false,
          "stateMutability": "nonpayable",
          "type": "function"
        },
        {
          "constant": true,
          "inputs": [
            {
              "name": "addr",
              "type": "address"
            }
          ],
          "name": "getShares",
          "outputs": [
            {
              "name": "",
              "type": "uint256"
            }
          ],
          "payable": false,
          "stateMutability": "view",
          "type": "function"
        }
      ]

      var SharesContract = web3.eth.contract(abi);


      var contractAddress = '0x264771b9c23ca3706ac014db408e0a4f86c02aa8'
      var instance = SharesContract.at(contractAddress);


      var buyerAddress = '0x491179f035fdf219798d186f576abdf842c14ca6'



      instance.getShares(buyerAddress, function (err, res) {
        $('#numShares').text(res.toString())
      })

      function buy() {

        instance.updateShares(1, { from: buyerAddress }, function (err, res) {
          console.log('txn', 'https://rinkeby.etherscan.io/tx/' + res)
        })
      }
    </script>
    <p id="numShares"></p>
  <table>
    <button onclick='buy()'>Update</button>
    <br>
    <div>
    <a href="https://rinkeby.etherscan.io/address/0x264771B9C23CA3706Ac014db408E0A4F86C02AA8">view history</a>
    </div>
    </table>
  </body>
</html>
